// Copy the entire line below and paste it in the visual editor.
{"id":222506597,"name":"Tools Permission","keys":[null,null,null,null,null,null,null,[],null,null,null,null,null,null,null,[{"t":"p","d":{"a":{"t":"s","script":"// Deny\ncheckDenyPermission();"}}}],[{"t":"p","d":{"a":{"t":"s","script":"// Deny\ncheckDenyPermission();"}}}],null,[],[{"t":"p","d":{"a":{"t":"s","script":"// Allow\ncheckGrantPermission();"}}}],[{"t":"p","d":{"a":{"t":"s","script":"// Allow\ncheckGrantPermission();"}}}],null,null,null,null,null,null,[],null,null,null,null,[],null,null,null,null,null,null,null,null,null],"scripts":{"init":"if(#flag(local, \"Require permission to use Tools\", true)) {\n  if (!isInReinit()) disableConsole();\n\n  const SCRIPT_ID_CONSOLE_ACCESS_REQUESTED = 19;\n  setScript(SCRIPT_ID_CONSOLE_ACCESS_REQUESTED, @onConsoleAccessAttempted);\n}\n"},"user_scripts":{"rgbUpdate":"const CONSOLE_KEY_ORDER = [[ 00 01 02 03 04 05 06 07 08 09 0a 0b 0a 09 08 07 06 05 04 03 02 01 ]];\n\n#option(rgbUpdate, \"RGB Mode\", \"Tools Access Prompt\", rgbUpdateKeyConsoleAccessPrompt)\nfunc rgbUpdateKeyConsoleAccessPrompt() {\n  for (var i = 0; i < 54; i = i + 1) {\n    setRgb(i, 0, 0, 0);\n  }\n\n  var index = getTime() >> 6;\n  var keyId = CONSOLE_KEY_ORDER[index % 22];\n  setRgb(keyId, 16, 16, 16);\n\n  setRgb(15, 32, 0, 0);\n  setRgb(16, 32, 0, 0);\n  setRgb(19, 0, 32, 0);\n  setRgb(20, 0, 32, 0);\n}\n\n#option(rgbUpdateUnderglow, \"RGB Mode\", \"Tools Access Prompt\",  rgbUpdateUnderglowOff) \n\n","Permission Scripts":"var preConsolePermissionLayer = -1;\n\nfunc onConsoleAccessAttempted() {\n  if (preConsolePermissionLayer == -1) {\n   preConsolePermissionLayer = layer;\n  }\n  _action_showPermission();\n}\n\nfunc returnFromPermission() {\n    deactivateGlobal();\n    deactivateDynamic();\n    layer = preConsolePermissionLayer;\n    preConsolePermissionLayer = -1;\n    activateDynamic();\n    activateGlobal();\n}\n\nfunc checkGrantPermission() {\n  if (isButtonPressed(19) && isButtonPressed(20)) {\n    enableConsole();\n    returnFromPermission();\n  }\n}\n\nfunc checkDenyPermission() {\n  if (isButtonPressed(15) && isButtonPressed(16)) {\n    returnFromPermission();\n  }\n}\n"},"options":{"Always Power RGB":"true","RGB Mode":"Tools Access Prompt","Enable individual keys in Key Layout tool":"true","Require permission to use Tools":"true"},"sequences":{"showPermission":[{"t":"l","l":222506597}]}}
